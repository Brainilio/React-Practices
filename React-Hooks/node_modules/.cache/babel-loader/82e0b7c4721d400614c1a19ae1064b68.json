{"ast":null,"code":"var _jsxFileName = \"/Users/brainilio/Desktop/Projects/Udemy_React_Course_2020_CodeStorage/React-Hooks/src/components/Ingredients/Search.js\";\nimport React from \"react\";\nimport Card from \"../UI/Card\";\nimport \"./Search.css\";\nconst Search = React.memo(props => {\n  //destructure props\n  const {\n    onLoadIngredients\n  } = props;\n  const [enteredFilter, setEnteredFilter] = React.useState(\"\");\n  const inputRef = React.useRef(); // only fires when enteredfilter changes.\n\n  React.useEffect(() => {\n    setTimeout(() => {\n      if (enteredFilter === inputRef.current.value) {\n        //query string\n        const query = enteredFilter.length === 0 ? \"\" : `?orderBy=\"title\"&equalTo=\"${enteredFilter}\"`;\n        fetch(\"https://dummyproject-35081.firebaseio.com/ingredients.json\" + query).then(response => response.json()).then(data => {\n          const loadedIngredients = [];\n\n          for (const key in data) {\n            loadedIngredients.push({\n              id: key,\n              title: data[key].title,\n              amount: data[key].amount\n            });\n          }\n\n          onLoadIngredients(loadedIngredients);\n        });\n      }\n    }, 500);\n  }, [enteredFilter, onLoadIngredients, inputRef]);\n  return /*#__PURE__*/React.createElement(\"section\", {\n    className: \"search\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 6\n    }\n  }, \"Filter by Title\"), /*#__PURE__*/React.createElement(\"input\", {\n    ref: inputRef,\n    type: \"text\",\n    onChange: e => setEnteredFilter(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 6\n    }\n  }))));\n});\nexport default Search;","map":{"version":3,"sources":["/Users/brainilio/Desktop/Projects/Udemy_React_Course_2020_CodeStorage/React-Hooks/src/components/Ingredients/Search.js"],"names":["React","Card","Search","memo","props","onLoadIngredients","enteredFilter","setEnteredFilter","useState","inputRef","useRef","useEffect","setTimeout","current","value","query","length","fetch","then","response","json","data","loadedIngredients","key","push","id","title","amount","e","target"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAOC,IAAP,MAAiB,YAAjB;AACA,OAAO,cAAP;AAEA,MAAMC,MAAM,GAAGF,KAAK,CAACG,IAAN,CAAYC,KAAD,IAAW;AACpC;AACA,QAAM;AAAEC,IAAAA;AAAF,MAAwBD,KAA9B;AACA,QAAM,CAACE,aAAD,EAAgBC,gBAAhB,IAAoCP,KAAK,CAACQ,QAAN,CAAe,EAAf,CAA1C;AACA,QAAMC,QAAQ,GAAGT,KAAK,CAACU,MAAN,EAAjB,CAJoC,CAKpC;;AACAV,EAAAA,KAAK,CAACW,SAAN,CAAgB,MAAM;AACrBC,IAAAA,UAAU,CAAC,MAAM;AAChB,UAAIN,aAAa,KAAKG,QAAQ,CAACI,OAAT,CAAiBC,KAAvC,EAA8C;AAC7C;AACA,cAAMC,KAAK,GACVT,aAAa,CAACU,MAAd,KAAyB,CAAzB,GACG,EADH,GAEI,6BAA4BV,aAAc,GAH/C;AAIAW,QAAAA,KAAK,CACJ,+DAA+DF,KAD3D,CAAL,CAGEG,IAHF,CAGQC,QAAD,IAAcA,QAAQ,CAACC,IAAT,EAHrB,EAIEF,IAJF,CAIQG,IAAD,IAAU;AACf,gBAAMC,iBAAiB,GAAG,EAA1B;;AACA,eAAK,MAAMC,GAAX,IAAkBF,IAAlB,EAAwB;AACvBC,YAAAA,iBAAiB,CAACE,IAAlB,CAAuB;AACtBC,cAAAA,EAAE,EAAEF,GADkB;AAEtBG,cAAAA,KAAK,EAAEL,IAAI,CAACE,GAAD,CAAJ,CAAUG,KAFK;AAGtBC,cAAAA,MAAM,EAAEN,IAAI,CAACE,GAAD,CAAJ,CAAUI;AAHI,aAAvB;AAKA;;AACDtB,UAAAA,iBAAiB,CAACiB,iBAAD,CAAjB;AACA,SAdF;AAeA;AACD,KAvBS,EAuBP,GAvBO,CAAV;AAwBA,GAzBD,EAyBG,CAAChB,aAAD,EAAgBD,iBAAhB,EAAmCI,QAAnC,CAzBH;AA2BA,sBACC;AAAS,IAAA,SAAS,EAAC,QAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADD,eAEC;AACC,IAAA,GAAG,EAAEA,QADN;AAEC,IAAA,IAAI,EAAC,MAFN;AAGC,IAAA,QAAQ,EAAGmB,CAAD,IAAOrB,gBAAgB,CAACqB,CAAC,CAACC,MAAF,CAASf,KAAV,CAHlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFD,CADD,CADD,CADD;AAcA,CA/Cc,CAAf;AAiDA,eAAeZ,MAAf","sourcesContent":["import React from \"react\"\n\nimport Card from \"../UI/Card\"\nimport \"./Search.css\"\n\nconst Search = React.memo((props) => {\n\t//destructure props\n\tconst { onLoadIngredients } = props\n\tconst [enteredFilter, setEnteredFilter] = React.useState(\"\")\n\tconst inputRef = React.useRef()\n\t// only fires when enteredfilter changes.\n\tReact.useEffect(() => {\n\t\tsetTimeout(() => {\n\t\t\tif (enteredFilter === inputRef.current.value) {\n\t\t\t\t//query string\n\t\t\t\tconst query =\n\t\t\t\t\tenteredFilter.length === 0\n\t\t\t\t\t\t? \"\"\n\t\t\t\t\t\t: `?orderBy=\"title\"&equalTo=\"${enteredFilter}\"`\n\t\t\t\tfetch(\n\t\t\t\t\t\"https://dummyproject-35081.firebaseio.com/ingredients.json\" + query\n\t\t\t\t)\n\t\t\t\t\t.then((response) => response.json())\n\t\t\t\t\t.then((data) => {\n\t\t\t\t\t\tconst loadedIngredients = []\n\t\t\t\t\t\tfor (const key in data) {\n\t\t\t\t\t\t\tloadedIngredients.push({\n\t\t\t\t\t\t\t\tid: key,\n\t\t\t\t\t\t\t\ttitle: data[key].title,\n\t\t\t\t\t\t\t\tamount: data[key].amount,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonLoadIngredients(loadedIngredients)\n\t\t\t\t\t})\n\t\t\t}\n\t\t}, 500)\n\t}, [enteredFilter, onLoadIngredients, inputRef])\n\n\treturn (\n\t\t<section className=\"search\">\n\t\t\t<Card>\n\t\t\t\t<div className=\"search-input\">\n\t\t\t\t\t<label>Filter by Title</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tref={inputRef}\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tonChange={(e) => setEnteredFilter(e.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</Card>\n\t\t</section>\n\t)\n})\n\nexport default Search\n"]},"metadata":{},"sourceType":"module"}